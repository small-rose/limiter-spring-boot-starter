# limiter-spring-boot-starter
服务限流与服务降级
4中算法实现了API限流
- 固定周期固定窗口算法
    - 原理:使用计数器在限定的固定周期内累加访问次数，当达到设定的限流值时，触发限流策略。下一个周期开始时，计数器清零，重新计数。
    - 特点: 简单，容易实现，窗口期较大时，临界区间容易发生流量突击。此算法在单机还是分布式环境下实现都非常简单，使用redis的incr原子自增性和线程安全即可轻松实现。
    - 注意事项: 尽可能缩小窗口周期小
    - 使用场景: 常用于QPS限流和统计总访问量.
- 滑动窗口算法
    - 原理: 将时间周期分为N个小周期，分别记录每个小周期内访问次数，并且根据时间滑动删除过期的小周期内的统计数据。
    - 特点: 平滑流量。滑动窗口的格子划分的越多，那么滑动窗口的滚动就越平滑，限流的统计就会越精确。
    - 注意事项: 尽可能多的小格子来让请求均匀。
- 令牌桶算法
    - 原理: 程序以r（r=时间周期/限流值）的速度向令牌桶中增加令牌，直到令牌桶满，请求到达时向从令牌桶请求获取令牌，如获取到令牌则通过请求，否则触发限流策略
    - 特点: 允许一定的突击流量，请求空闲时，总令牌数为令牌桶中最大令牌数（最大突击流量限制）。
    - 注意事项: 保护自己的接口，防止高并发冲击。谷歌已有实现。
    ```$xslt
       <dependency>
          <groupId>com.google.guava</groupId>
          <artifactId>guava</artifactId>
          <version>${version}</version>
       </dependency>
    ```
- 漏斗算法
    - 原理: 也有称之为漏斗算法，访问请求到达时直接放入漏桶，如当前容量已达到上限（限流值），则进行丢弃（触发限流策略）。漏桶以固定的速率进行释放访问请求（即请求通过），直到漏桶为空。
    - 特点: 适合请求到达频率稳定、需要严格控制处理速率的场景
    - 注意事项: 当漏斗满时，后续请求速率基本与令牌（或水滴）流出速率一致，
    - 使用场景: 保护需要调用的其他接口